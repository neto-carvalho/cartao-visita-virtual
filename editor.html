<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor de Cartão - Cartão de Visita Virtual</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- QR Code Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js"></script>
    
    <!-- Custom Styles -->
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
            overflow-x: hidden;
            max-width: 100vw;
        }
        
        .font-poppins {
            font-family: 'Poppins', sans-serif;
        }
        
        .gradient-pink {
            background: linear-gradient(135deg, #FF6B9D, #C44569);
        }
        
        .gradient-blue {
            background: linear-gradient(135deg, #00BFFF, #1E90FF);
        }
        
        .gradient-purple {
            background: linear-gradient(135deg, #8B5CF6, #A855F7);
        }
        
        .gradient-green {
            background: linear-gradient(135deg, #10B981, #059669);
        }
        
        .gradient-orange {
            background: linear-gradient(135deg, #F59E0B, #D97706);
        }
        
        .gradient-teal {
            background: linear-gradient(135deg, #14B8A6, #0D9488);
        }
        
        .card-preview {
            transition: all 0.3s ease;
        }
        
        .form-input {
            max-width: 100%;
        }
        
        .form-input:focus {
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        input, textarea, select {
            max-width: 100%;
        }
        
        .color-picker {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .theme-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            transition: transform 0.2s ease;
        }
        
        .theme-btn:hover .theme-preview {
            transform: scale(1.1);
        }
        
        .upload-area {
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: #3B82F6;
            background-color: #F0F9FF;
        }
        
        .upload-area.dragover {
            border-color: #3B82F6;
            background-color: #E0F2FE;
        }
        
        .link-item {
            transition: all 0.3s ease;
        }
        
        .link-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .mobile-preview {
            width: 320px;
            height: 580px;
            background: #000;
            border-radius: 25px;
            padding: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
            position: relative;
            transition: transform 0.3s ease;
        }
        
        .mobile-preview:hover {
            transform: translateY(-5px);
        }
        
        .mobile-preview::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background: #333;
            border-radius: 2px;
            z-index: 10;
        }
        
        .card-content {
            width: 100%;
            height: 100%;
            border-radius: 15px;
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 2.5rem 20px 1.5rem;
            box-sizing: border-box;
            scroll-behavior: smooth;
        }
        
        /* Scrollbar styling for card preview */
        .card-content::-webkit-scrollbar {
            width: 6px;
        }
        
        .card-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .card-content::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }
        
        .card-content::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
        
        /* Container adjustments */
        .max-w-7xl {
            max-width: 100%;
            width: 100%;
        }
        
        #editor, #preview {
            max-width: 100%;
            overflow-x: hidden;
        }
        
        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .mobile-preview {
                width: 280px;
                height: 500px;
            }
            
            .grid.grid-cols-1.lg\\:grid-cols-2 {
                grid-template-columns: 1fr;
            }
            
            .max-w-7xl {
                padding-left: 1rem;
                padding-right: 1rem;
            }
        }
        
        @media (max-width: 768px) {
            .mobile-preview {
                width: 260px;
                height: 460px;
            }
            
            .theme-btn {
                padding: 8px;
            }
            
            .theme-preview {
                width: 30px;
                height: 30px;
            }
            
            .alignment-btn {
                padding: 8px 12px;
                font-size: 0.875rem;
            }
            
            #editor, #preview {
                padding: 1rem;
            }
            
            .max-w-7xl {
                padding-left: 0.5rem;
                padding-right: 0.5rem;
            }
        }
        
        @media (max-width: 480px) {
            .mobile-preview {
                width: 240px;
                height: 420px;
            }
            
            .card-content {
                padding: 15px;
            }
            
            .profile-image {
                width: 80px;
                height: 80px;
            }
            
            #editor, #preview {
                padding: 0.75rem;
            }
            
            .max-w-7xl {
                padding-left: 0.25rem;
                padding-right: 0.25rem;
            }
            
            .grid {
                gap: 1rem;
            }
            
            input, textarea {
                font-size: 16px; /* Prevent zoom on iOS */
            }
        }
        
        .profile-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            flex-shrink: 0;
            margin-top: 0.5rem;
            margin-bottom: 0.75rem;
        }
        
        .profile-image.placeholder {
            background: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .link-button {
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .link-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            filter: brightness(1.1);
        }
        
        .alignment-btn.active {
            border-color: #3B82F6;
            background-color: #EFF6FF;
            color: #1D4ED8;
        }
        
        .theme-btn.active {
            border-color: #3B82F6;
            background-color: #EFF6FF;
        }
        
        .placeholder {
            opacity: 0.6;
            font-style: italic;
        }
        
        .contact-item.placeholder {
            pointer-events: none;
        }
        
        .link-buttons.placeholder .link-button {
            background: rgba(255, 255, 255, 0.2) !important;
            cursor: default;
        }
        
        .link-buttons.placeholder .link-button:hover {
            transform: none;
            background: rgba(255, 255, 255, 0.2) !important;
        }
        
        /* Prevent horizontal overflow globally */
        html {
            overflow-x: hidden;
            max-width: 100vw;
        }
        
        .grid {
            max-width: 100%;
        }
        
        /* Ensure all containers respect viewport width */
        main, section, div {
            max-width: 100%;
        }
        
        /* Link items inside the editor */
        .link-item {
            max-width: 100%;
            word-wrap: break-word;
        }
        
        #linksContainer {
            max-width: 100%;
            overflow-x: hidden;
        }
        
        /* Text wrapping in card preview */
        .card-content * {
            word-wrap: break-word;
            overflow-wrap: break-word;
            word-break: break-word;
            max-width: 100%;
        }
        
        .card-content h1,
        .card-content h2,
        .card-content h3,
        .card-content p,
        .card-content span,
        .card-content div {
            overflow-wrap: break-word;
            word-wrap: break-word;
            hyphens: auto;
            max-width: 100%;
        }
        
        .card-content .link-button {
            max-width: 100%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* Card content elements styling */
        .card-content .name {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            text-align: center;
            margin-top: 0;
            margin-bottom: 0.5rem;
            max-width: 100%;
            padding: 0 10px;
            flex-shrink: 0;
            line-height: 1.3;
        }
        
        .card-content .job-title {
            font-size: 1rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.95);
            text-align: center;
            margin-bottom: 0.5rem;
            max-width: 100%;
            padding: 0 10px;
            flex-shrink: 0;
        }
        
        .card-content .description {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            margin-bottom: 0.75rem;
            max-width: 100%;
            padding: 0 10px;
            flex-shrink: 0;
        }
        
        .card-content .contact-info {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            width: 100%;
            max-width: 100%;
            padding: 0 10px;
            flex-shrink: 0;
        }
        
        .card-content .contact-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.875rem;
            text-decoration: none;
            max-width: 100%;
        }
        
        .card-content .contact-item span {
            max-width: calc(100% - 30px);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .card-content .link-buttons {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            width: 100%;
            max-width: 100%;
            padding: 0 10px;
            margin-top: 0.5rem;
            flex-shrink: 0;
            padding-bottom: 1rem;
        }
        
        .card-content .link-button {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem 1rem;
            border-radius: 12px;
            text-decoration: none;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 100%;
            box-sizing: border-box;
        }
        
        .card-content .link-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .card-content .link-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }
        
        .card-content .link-text {
            font-weight: 500;
            font-size: 0.875rem;
            max-width: calc(100% - 40px);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
    </style>
</head>
<body>
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-100 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center space-x-2 text-gray-800 hover:text-blue-600 transition-colors">
                        <i class="fas fa-id-card text-2xl text-blue-600"></i>
                        <span class="font-poppins font-bold text-xl">Cartão Virtual</span>
                    </a>
                </div>
                <nav class="flex space-x-4">
                    <a href="index.html" class="flex items-center space-x-2 px-3 py-2 rounded-lg text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-colors">
                        <i class="fas fa-home"></i>
                        <span>Início</span>
                    </a>
                    <a href="editor.html" class="flex items-center space-x-2 px-3 py-2 rounded-lg text-blue-600 bg-blue-50 transition-colors">
                        <i class="fas fa-edit"></i>
                        <span>Editor</span>
                    </a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="min-h-screen bg-gray-50 py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <!-- Editor Panel -->
                <div id="editor" class="bg-white rounded-2xl shadow-lg p-6">
                    <div class="mb-6">
                        <h1 class="text-2xl font-poppins font-bold text-gray-800 mb-2">Editor de Cartão</h1>
                        <p class="text-gray-600">Personalize seu cartão digital e veja as mudanças em tempo real</p>
                    </div>

                    <!-- Personal Information -->
                    <div class="mb-8">
                        <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-user text-blue-600 mr-2"></i>
                            Informações Pessoais
                        </h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label for="fullName" class="block text-sm font-medium text-gray-700 mb-1">Nome Completo</label>
                                <input type="text" id="fullName" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Seu nome completo">
                            </div>
                            
                            <div>
                                <label for="jobTitle" class="block text-sm font-medium text-gray-700 mb-1">Cargo e Área de Atuação</label>
                                <input type="text" id="jobTitle" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Ex: Designer de Moda">
                            </div>
                            
                            <div>
                                <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Descrição Curta</label>
                                <input type="text" id="description" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Ex: Beleza, Moda e Lifestyle">
                            </div>
                            
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
                                <input type="email" id="email" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="seu@email.com">
                            </div>
                        </div>
                    </div>

                    <!-- Photo Upload -->
                    <div class="mb-8">
                        <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-camera text-blue-600 mr-2"></i>
                            Foto de Perfil
                        </h2>
                        
                        <div class="upload-area border-2 border-dashed border-gray-300 rounded-xl p-8 text-center cursor-pointer" id="uploadArea">
                            <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                            <p class="text-gray-600 font-medium mb-2">Clique ou arraste uma foto</p>
                            <p class="text-sm text-gray-500">PNG, JPG até 5MB</p>
                        </div>
                        <input type="file" id="imageInput" accept="image/*" class="hidden">
                        <div id="imagePreview" class="mt-4 hidden">
                            <img id="previewImage" class="w-32 h-32 object-cover rounded-full mx-auto border-4 border-white shadow-lg">
                            <button onclick="removeImage()" class="mt-2 text-red-600 hover:text-red-800 text-sm font-medium">
                                <i class="fas fa-trash mr-1"></i>Remover imagem
                            </button>
                        </div>
                    </div>

                    <!-- Design Options -->
                    <div class="mb-8">
                        <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-palette text-blue-600 mr-2"></i>
                            Personalização Visual
                        </h2>
                        
                        <!-- Theme Selection -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Tema de Fundo</label>
                            <div class="grid grid-cols-3 gap-3">
                                <button class="theme-btn p-3 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-all" data-theme="gradient-pink">
                                    <div class="theme-preview gradient-pink mx-auto mb-2"></div>
                                    <span class="text-xs font-medium text-gray-700">Rosa</span>
                                </button>
                                <button class="theme-btn p-3 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-all" data-theme="gradient-blue">
                                    <div class="theme-preview gradient-blue mx-auto mb-2"></div>
                                    <span class="text-xs font-medium text-gray-700">Azul</span>
                                </button>
                                <button class="theme-btn p-3 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-all" data-theme="gradient-purple">
                                    <div class="theme-preview gradient-purple mx-auto mb-2"></div>
                                    <span class="text-xs font-medium text-gray-700">Roxo</span>
                                </button>
                                <button class="theme-btn p-3 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-all" data-theme="gradient-green">
                                    <div class="theme-preview gradient-green mx-auto mb-2"></div>
                                    <span class="text-xs font-medium text-gray-700">Verde</span>
                                </button>
                                <button class="theme-btn p-3 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-all" data-theme="gradient-orange">
                                    <div class="theme-preview gradient-orange mx-auto mb-2"></div>
                                    <span class="text-xs font-medium text-gray-700">Laranja</span>
                                </button>
                                <button class="theme-btn p-3 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-all" data-theme="gradient-teal">
                                    <div class="theme-preview gradient-teal mx-auto mb-2"></div>
                                    <span class="text-xs font-medium text-gray-700">Verde-azulado</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Color Customization -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Cor Principal dos Botões</label>
                            <div class="flex items-center space-x-4">
                                <input type="color" id="primaryColor" class="color-picker" value="#00BFFF">
                                <span class="text-sm text-gray-600">Escolha a cor dos botões de links</span>
                            </div>
                        </div>
                        
                        <!-- Text Alignment -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Alinhamento do Texto</label>
                            <div class="flex space-x-3">
                                <button id="alignCenter" class="alignment-btn flex-1 p-3 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-all flex items-center justify-center space-x-2" data-alignment="center">
                                    <i class="fas fa-align-center"></i>
                                    <span class="text-sm font-medium">Centralizado</span>
                                </button>
                                <button id="alignLeft" class="alignment-btn flex-1 p-3 border-2 border-gray-200 rounded-lg hover:border-blue-500 transition-all flex items-center justify-center space-x-2" data-alignment="left">
                                    <i class="fas fa-align-left"></i>
                                    <span class="text-sm font-medium">Esquerda</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Links Management -->
                    <div class="mb-8">
                        <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-link text-blue-600 mr-2"></i>
                            Links Personalizados
                        </h2>
                        <p class="text-sm text-gray-600 mb-4">Adicione seus links importantes como Instagram, TikTok, produtos, loja, etc.</p>
                        
                        <div id="linksContainer" class="space-y-4">
                            <!-- Links will be added here dynamically -->
                        </div>
                        
                        <button id="addLinkBtn" class="w-full mt-4 p-4 border-2 border-dashed border-blue-300 rounded-lg text-blue-600 hover:border-blue-500 hover:bg-blue-50 transition-all flex items-center justify-center space-x-2">
                            <i class="fas fa-plus"></i>
                            <span>Adicionar Link</span>
                        </button>
                    </div>

                    <!-- Actions -->
                    <div class="space-y-4">
                        <div class="flex space-x-4">
                            <button id="generateCard" class="flex-1 bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-blue-800 transition-all flex items-center justify-center space-x-2">
                                <i class="fas fa-magic"></i>
                                <span>Gerar Cartão</span>
                            </button>
                            <button id="saveCard" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all">
                                <i class="fas fa-save"></i>
                            </button>
                        </div>
                        
                        <!-- QR Code Button (Development Status) -->
                        <button id="generateQRCode" class="w-full bg-gradient-to-r from-green-600 to-green-700 text-white py-3 px-6 rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition-all flex items-center justify-center space-x-2 opacity-75 cursor-not-allowed" disabled>
                            <i class="fas fa-qrcode"></i>
                            <span>Gerar QR Code</span>
                            <span class="text-xs bg-yellow-500 text-yellow-900 px-2 py-1 rounded-full ml-2">Em Desenvolvimento</span>
                        </button>
                    </div>
                </div>

                <!-- Preview Panel -->
                <div id="preview" class="bg-white rounded-2xl shadow-lg p-6">
                    <div class="mb-6">
                        <h2 class="text-2xl font-poppins font-bold text-gray-800 mb-2">Preview em Tempo Real</h2>
                        <p class="text-gray-600">Veja como seu cartão ficará no celular</p>
                    </div>
                    
                    <!-- Mobile Preview -->
                    <div class="flex justify-center">
                        <div class="mobile-preview">
                            <div class="card-content gradient-pink text-white" id="cardPreview">
                                <!-- Card content will be generated here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Preview Controls -->
                    <div class="mt-4 text-center">
                        <p class="text-sm text-gray-500 mb-2">Preview em tempo real</p>
                        <div class="flex justify-center space-x-2">
                            <button id="previewRotate" class="p-2 text-gray-600 hover:text-blue-600 transition-colors" title="Rotacionar preview">
                                <i class="fas fa-rotate"></i>
                            </button>
                            <button id="previewZoom" class="p-2 text-gray-600 hover:text-blue-600 transition-colors" title="Zoom">
                                <i class="fas fa-search-plus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Generated Info (hidden by default) -->
                    <div id="generatedInfo" class="mt-6 p-6 bg-green-50 border border-green-200 rounded-lg hidden">
                        <h3 class="text-lg font-semibold text-green-800 mb-4">Seu cartão foi gerado!</h3>
                        <div class="text-center">
                            <div id="qrcode" class="mb-4"></div>
                            <p class="text-green-700 mb-4">Escaneie o QR Code ou use o link abaixo:</p>
                            <div class="flex space-x-2">
                                <input type="text" id="shareUrl" class="flex-1 px-3 py-2 border border-green-300 rounded-lg text-sm" readonly>
                                <button id="copyUrl" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <button id="downloadQR" class="mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                                <i class="fas fa-download mr-2"></i>Baixar QR Code
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="scripts/app.js?v=5.0"></script>
    <script src="scripts/editor.js?v=5.0"></script>
    <script src="scripts/preview.js?v=5.0"></script>
    <script src="scripts/links.js?v=5.0"></script>
    <script src="scripts/qr-generator.js?v=5.0"></script>
</body>
</html>
